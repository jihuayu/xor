# Cargo 配置

# x86_64 Linux MUSL 静态编译配置
[target.x86_64-unknown-linux-musl]
linker = "musl-gcc"
rustflags = ["-C", "target-feature=+crt-static"]

# 通用优化配置
[build]
# 使用所有可用的 CPU 核心
jobs = 0

[profile.release]
# 链接时优化
lto = true
# 优化级别
opt-level = 3
# 代码生成单元数（1 = 最大优化）
codegen-units = 1
# 剥离符号信息
strip = true
# Panic 时直接 abort 而不是展开
panic = "abort"

# 网络配置
[net]
# 使用 Git CLI 而不是 libgit2（在某些环境下更可靠）
git-fetch-with-cli = true

# HTTP 配置
[http]
# 请求超时（秒）
timeout = 600
# 低速限制（字节/秒）
low-speed-limit = 10
# 多路复用
multiplexing = true

# 注册源配置（可选，使用国内镜像加速）
# [source.crates-io]
# replace-with = "rsproxy"
#
# [source.rsproxy]
# registry = "https://rsproxy.cn/crates.io-index"
#
# [registries.rsproxy]
# index = "https://rsproxy.cn/crates.io-index"
